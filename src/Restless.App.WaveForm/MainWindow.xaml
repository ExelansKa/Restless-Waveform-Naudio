<Window
    x:Class="Restless.App.Wave.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:vm="clr-namespace:Restless.App.Wave" d:DataContext="{d:DesignInstance Type=vm:MainWindowViewModel}"
    mc:Ignorable="d"
    WindowStartupLocation="CenterScreen"
    Title="Demo App"
    Height="620" Width="1200">
    <Grid Margin="8,2">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
        </Grid.RowDefinitions>

        <!-- Open button and file name -->
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>

            <Button Content="Open" ToolTip="Open an audio file for rendering" Command="{Binding OpenCommand}"/>
            <TextBlock Grid.Column="1" HorizontalAlignment="Right" Text="{Binding SelectedFile}"/>
        </Grid>

        <Separator Grid.Row="1"/>

        <!-- Controls -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.Resources>
                <Style TargetType="ComboBox" BasedOn="{StaticResource DefaultComboBoxStyle}">
                    <Setter Property="Width" Value="164"/>
                </Style>
            </Grid.Resources>

            <!-- Peak provider -->
            <TextBlock Text="Peak Provider"/>
            <ComboBox
                Grid.Row="1" 
                ItemsSource="{Binding PeakProviders}"
                SelectedItem="{Binding SelectedPeakProvider}"
                DisplayMemberPath="DisplayName"/>

            <!-- Rendering style -->
            <TextBlock Grid.Column="1" Text="Style"/>
            <ComboBox
                Grid.Row="1" Grid.Column="1"
                ItemsSource="{Binding WaveFormSettings}"
                SelectedItem="{Binding SelectedWaveFormSetting}"
                DisplayMemberPath="DisplayName"/>
            
            <!-- Image width -->
            <TextBlock Grid.Column="2">
                <Run Text="Image Width"/>
                <Run Text="{Binding ImageWidth, Mode=OneWay, StringFormat=N0}"/>
            </TextBlock>
            <Slider 
                Grid.Row="1" Grid.Column="2"
                Minimum="{x:Static vm:MainWindowViewModel.MinImageWidth}"
                Maximum="{x:Static vm:MainWindowViewModel.MaxImageWidth}"
                Value="{Binding ImageWidth, Delay=500}"/>

            <!-- Height of top blocks -->
            <TextBlock Grid.Column="3">
                <Run Text="Top Height"/>
                <Run Text="{Binding TopHeight, Mode=OneWay, StringFormat=N0}"/>
            </TextBlock>
            <Slider
                Grid.Row="1" Grid.Column="3"
                Minimum="{x:Static vm:MainWindowViewModel.MinHeight}"
                Maximum="{x:Static vm:MainWindowViewModel.MaxHeight}"
                Value="{Binding TopHeight, Delay=500}"/>

            <!-- Height of botton blocks -->
            <TextBlock Grid.Column="4">
                <Run Text="Bottom Height"/>
                <Run Text="{Binding BottomHeight, Mode=OneWay, StringFormat=N0}"/>
            </TextBlock>
            <Slider
                Grid.Row="1" Grid.Column="4"
                Minimum="{x:Static vm:MainWindowViewModel.MinHeight}"
                Maximum="{x:Static vm:MainWindowViewModel.MaxHeight}"
                Value="{Binding BottomHeight, Delay=500}"/>

            <CheckBox Grid.Column="5" Grid.RowSpan="2" IsChecked="{Binding UseDecibelScale}" Content="Use decibel scale"/>
        </Grid>


        <!-- Images -->
        <Grid Grid.Row="3">
            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition Height="{Binding FileVisualRightRow}"/>
            </Grid.RowDefinitions>

            <Border 
                Margin="0,4"
                Padding="6"
                BorderBrush="LightGray" 
                BorderThickness="1">
                    <Image Source="{Binding FileVisualLeft}"/>
            </Border>
            <Border 
                Grid.Row="1"
                Margin="0,4"
                Padding="6"
                BorderBrush="LightGray" 
                BorderThickness="1">
                <Image Source="{Binding FileVisualRight}"/>
            </Border>

        </Grid>

    </Grid>
</Window>